<div class="card">
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLabel">Updating server</h5>
    <button (click)="closeDialog()" aria-label="Close" class="close" type="button">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div *ngIf="inputError" class="alert alert-danger col-12" role="alert">
      {{inputError}}
    </div>

    <form [formGroup]="updateForm">

      <input formControlName="fileId" id="objectIdInputUpdate" name="objectId" type="hidden">
      <input formControlName="parentId" id="parentIdInputUpdate" name="parentId" type="hidden">
      <input formControlName="lastAccessByJob" id="lastAccessByJob" name="lastAccessByJob" type="hidden">
      <input formControlName="ip" id="ipInputUpdate" name="ip" type="hidden">

      <app-error-check-input [controlName]="'name'" [errorCheckFunction]="getErrorByControlName"
                             [labelText]="'Server Name'" [parentFormGroup]="this.updateForm" [placeholder]="'Server #1'"
                             [type]="'text'">
      </app-error-check-input>

      <app-error-check-input [controlName]="'port'" [errorCheckFunction]="getErrorByControlName"
                             [labelText]="'Port'" [parentFormGroup]="this.updateForm" [placeholder]="'65535'"
                             [type]="'number'">
      </app-error-check-input>

      <app-error-check-input [controlName]="'login'" [errorCheckFunction]="getErrorByControlName"
                             [labelText]="'Username'" [parentFormGroup]="this.updateForm" [placeholder]="'user'"
                             [type]="'text'">
      </app-error-check-input>

      <app-error-check-input [controlName]="'password'" [errorCheckFunction]="getErrorByControlName"
                             [labelText]="'Password'" [parentFormGroup]="this.updateForm" [placeholder]="'password'"
                             [type]="'text'">
      </app-error-check-input>

      <app-error-check-select [controlName]="'protocol'" [errorCheckFunction]="getErrorByControlName"
                              [labelText]="'Protocol'" [parentFormGroup]="this.updateForm"
                              [values]="protocols">
      </app-error-check-select>
      <div [formGroup]="this.updateForm" class="form-check">
        <input class="form-check-input" formControlName="enabled" id="enabledSelectUpdate" name="enabled"
               type="checkbox">
        <label class="form-check-label" for="enabledSelectUpdate">Enabled</label>
      </div>
    </form>
    <hr/>
    <div class="d-flex justify-content-around">
      <button (click)="testConnection()" class="btn btn-info col-4" type="button">Test connection</button>
      <div *ngIf="(testResultMessage===undefined)" class="col-7"></div>
      <div *ngIf="(testResultMessage!==undefined)" [ngClass]="testResult?'alert-success':'alert-danger'"
           class="alert col-7 text-center mb-0 pt-1 pb-1 pr-2 pl-2">{{testResultMessage}}</div>
    </div>
  </div>
  <div class="modal-footer">
    <button (click)="closeDialog()" class="btn btn-secondary"
            type="button">Close
    </button>
    <button (click)="saveDialogResult()" class="btn btn-primary" type="submit">Update Server
    </button>
  </div>
</div>
